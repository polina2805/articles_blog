{% extends 'base.html' %}

{% block title %}
    {% if article %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é{% else %}–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é{% endif %}
{% endblock %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <h1 style="margin-bottom: 30px;">
        {% if article %}
            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é
        {% else %}
            ‚ú® –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é
        {% endif %}
    </h1>
    
    {% if article %}
    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <small>
            <strong>ID:</strong> #{{ article.id }} ‚Ä¢ 
            <strong>–°–æ–∑–¥–∞–Ω–∞:</strong> {{ article.created_at|date:"d.m.Y H:i" }} ‚Ä¢ 
            <strong>–û–±–Ω–æ–≤–ª–µ–Ω–∞:</strong> {{ article.updated_at|date:"d.m.Y H:i" }}
        </small>
    </div>
    {% endif %}
    
    <form method="post">
        <div class="form-group">
            <label>üìå –ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
            <input type="text" name="title" class="form-control" 
                   value="{{ article.title|default:'' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏" required maxlength="200">
        </div>
        
        <div class="form-group">
            <label>üë§ –ê–≤—Ç–æ—Ä</label>
            <input type="text" name="author" class="form-control" 
                   value="{{ article.author|default:'' }}"
                   placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" required maxlength="100">
        </div>
        
        <div class="form-group">
            <label>üìù –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</label>
            <textarea name="content" class="form-control" 
                      rows="10" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å —Å–≤–æ—é —Å—Ç–∞—Ç—å—é..." required>{{ article.content|default:'' }}</textarea>
            <div style="text-align: right; margin-top: 5px; color: #666; font-size: 14px;">
                <span id="charCount">{{ article.content|length|default:0 }}</span> —Å–∏–º–≤–æ–ª–æ–≤
            </div>
        </div>
        
        <div style="display: flex; gap: 15px; margin-top: 30px;">
            <a href="{% url 'articles_list' %}" class="btn" style="background: #6c757d;">
                ‚Ü©Ô∏è –ù–∞–∑–∞–¥ –∫ —Å—Ç–∞—Ç—å—è–º
            </a>
            <button type="submit" class="btn" style="flex-grow: 1;">
                {% if article %}
                    üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                {% else %}
                    üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é
                {% endif %}
            </button>
        </div>
    </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const contentField = document.querySelector('textarea[name="content"]');
    const charCount = document.getElementById('charCount');
    
    if (contentField && charCount) {
        function updateCharCount() {
            charCount.textContent = contentField.value.length;
        }
        
        contentField.addEventListener('input', updateCharCount);
        updateCharCount(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    }
});
</script>
{% endblock %}